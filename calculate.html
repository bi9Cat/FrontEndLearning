<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>计算器</title>
	<link href="./calculate.css" rel="stylesheet" />
</head>

<body>
	<div class="container">
		<div style="margin: 10px; font-size: 10px; pointer-events: none;">计算器</div>
		<div id="menu" class="bordmargin">
			<button id="setnemu">
				<img src="./images/icons8-菜单-50.png" alt="Icon" />
			</button>
			<p style="display: inline;font-size: 25px;">标准</p>
			<button>
				<img src="./images/icons8-最大化-50.png" />
			</button>
			<button style="float: right;margin-right:10px;">
				<img src="./images/icons8-历史-48.png" />
			</button>
			<div id="menudv" class="v1 animation-slide-left">
				<ul id="menuul">
					<li class="grayfont">计算器
						<ul>
							<li class="backimagebiaozhun">标准</li>
							<li class="backimagekexu">科学</li>
							<li class="backimagehuitu">绘图</li>
							<li class="backimagechengxuyuan">程序员</li>
							<li class="backimageriqi">日期计算</li>
						</ul>
					</li>
					<li class="grayfont">转换器
						<ul>
							<li>货币</li>
							<li>容量</li>
							<li>长度</li>
							<li>重量</li>
							<li>温度</li>
							<li>能量</li>
							<li>面积</li>
							<li>速度</li>
							<li>时间</li>
							<li>功率</li>
							<li>数据</li>
							<li>压强</li>
							<li>角度</li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
		<div>
			<p class="screen">0</p>
		</div>
		<div class="spopboard bordmargin">
			<button class="spop">MC</button>
			<button class="spop">MR</button>
			<button class="spop">M+</button>
			<button class="spop">M-</button>
			<button class="spop">MS</button>
			<button class="spop">Mv</button>
		</div>
		<div class="keyboard">
			<button class="key">%</button>
			<button class="key">CE</button>
			<button class="key">C</button>
			<button class="key backimage"></button>
			<button class="key">1/x</button>
			<button class="key">x^2</button>
			<button class="key">2√￣</button>
			<button class="key">/</button>
			<button class="key numback">7</button>
			<button class="key numback">8</button>
			<button class="key numback">9</button>
			<button class="key">*</button>
			<button class="key numback">4</button>
			<button class="key numback">5</button>
			<button class="key numback">6</button>
			<button class="key">-</button>
			<button class="key numback">1</button>
			<button class="key numback">2</button>
			<button class="key numback">3</button>
			<button class="key">+</button>
			<button class="key numback">+/-</button>
			<button class="key numback">0</button>
			<button class="key numback">.</button>
			<button class="key equlback">=</button>
		</div>
	</div>
</body>
<script type="text/javascript">
	const screen = document.querySelector(".screen");
	const keys = document.querySelectorAll(".key");
	keys.forEach(key => {
		key.addEventListener("click", () => {
			let action = key.textContent;
			action = (action == null || action == "") ? "<-" : action;
			console.log(action);
			if (action == "C") {
				screen.textContent = "0";
			} else if (action == "=") {
				screen.textContent = eval(screen.textContent);
			} else if (action == "<-") {
				if (screen.textContent.length == 1) {
					screen.textContent = "0"
				} else {
					let str = screen.textContent;
					screen.textContent = str.substring(0, str.length - 1)
				}
			} else {
				if (screen.textContent == "0") {
					screen.textContent = action;
				} else if (screen.textContent.length < 13) {
					screen.textContent += action;
				}
			}
		})
	});

	const menubtn = document.getElementById("setnemu");
	const menudv = document.getElementById("menudv");

	let isMenuDvDisplay = false;
	menubtn.onclick = function () {
		isMenuDvDisplay ? menudv.style.display = "none" : menudv.style.display = "block";
		isMenuDvDisplay = !isMenuDvDisplay;
	}
</script>

</html>