<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>计算器</title>
	<link href="./calculate.css" rel="stylesheet" />
</head>

<body>
	<div class="container">
		
		<div id="menu" class="toolbar">
			<button id="menubtn" class="toolbtn">
				<img src="./images/icons8-菜单-50.png" alt="Icon" />
			</button>
			<p class="modedisplay">标准</p>
			<button class="toolbtn">
				<img src="./images/icons8-最大化-50.png" alt="Icon" />
			</button>
			<button class="toolbtn toolbtnhis">
				<img src="./images/icons8-历史-48.png" alt="Icon" />
			</button>
		</div>
		<div class="screenbox">
			<p class="screen">0</p>
		</div>
		<div class="spopboard divmargin">
			<button class="spop">MC</button>
			<button class="spop">MR</button>
			<button class="spop">M+</button>
			<button class="spop">M-</button>
			<button class="spop">MS</button>
			<button class="spop">Mv</button>
		</div>
		<div class="keyboard">
			<div class="keyboardline">
				<button class="key">%</button>
				<button class="key">CE</button>
				<button class="key">C</button>
				<button class="key backimage"></button>
			</div>
			<div class="keyboardline">
				<button class="key">1/x</button>
				<button class="key">x^2</button>
				<button class="key">2√￣</button>
				<button class="key">/</button>
			</div>

			<div class="keyboardline">
				<button class="key numback">7</button>
				<button class="key numback">8</button>
				<button class="key numback">9</button>
				<button class="key">*</button>
			</div>

			<div class="keyboardline">
				<button class="key numback">4</button>
				<button class="key numback">5</button>
				<button class="key numback">6</button>
				<button class="key">-</button>
			</div>

			<div class="keyboardline">
				<button class="key numback">1</button>
				<button class="key numback">2</button>
				<button class="key numback">3</button>
				<button class="key">+</button>
			</div>

			<div class="keyboardline">
				<button class="key numback">+/-</button>
				<button class="key numback">0</button>
				<button class="key numback">.</button>
				<button class="key equlback">=</button>
			</div>

		</div>
	</div>
</body>
<script type="text/javascript">
	const screen = document.querySelector(".screen");
	const keys = document.querySelectorAll(".key");
	keys.forEach(key => {
		key.addEventListener("click", () => {
			let action = key.textContent;
			action = (action == null || action == "") ? "<-" : action;
			console.log(action);
			if (action == "C") {
				screen.textContent = "0";
			} else if (action == "=") {
				screen.textContent = eval(screen.textContent);
			} else if (action == "<-") {
				if (screen.textContent.length == 1) {
					screen.textContent = "0"
				} else {
					let str = screen.textContent;
					screen.textContent = str.substring(0, str.length - 1)
				}
			} else {
				if (screen.textContent == "0") {
					screen.textContent = action;
				} else if (screen.textContent.length < 20) {
					screen.textContent += action;
				}
			}
		})
	});

	const menubtn = document.getElementById("menubtn");
	const menulist = document.getElementById("menudv");

	let isMenuDvDisplay = false;
	menubtn.onclick = function () {
		isMenuDvDisplay ? menudv.style.display = "none" : menudv.style.display = "block";
		isMenuDvDisplay = !isMenuDvDisplay;
	}
</script>

</html>